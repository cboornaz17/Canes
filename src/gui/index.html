<!DOCTYPE html>
<html>
<head>
  <title>Pallas!!!</title>
  <base href="/">
  <link rel="stylesheet" type="text/css" href="gui/assets/styles.css">
</head>

<body>

  <h1>Welcome to pallas</h1>
  <p>Insert your image here to be changed</p>
  <input type="file" id="newImage" name="newImage" accept="image/png, image/jpeg, image/jpg"/><br>

  <canvas id="canvas"></canvas><br>
  <form action="/images" method="post">
    <fieldset>
      <div>
        <label>Image!</label>
        Image: <input type="text" name="data" id="data" value="data">
        Name: <input type="text" name="name" id="name" value="name">
        <input type="submit" id="submit" value="Submit">

      </div>
    </fieldset>
  </form>

  <!-- JAVASCRIPT -->
  <script>
  document.getElementById('newImage').onchange = function(e) {
    var img = new Image();
    img.onload = draw;
    img.onerror = failed;
    img.src = URL.createObjectURL(this.files[0]);
  };
  function draw() {
    var canvas = document.getElementById('canvas');
    canvas.width = this.width;
    canvas.height = this.height;
    var ctx = canvas.getContext('2d');
    ctx.drawImage(this, 0,0);
    document.getElementById('data').value = canvas.toDataURL('image/jpg', 1.0);
    console.log(document.getElementById('data').value);
  }
  function failed() {
    console.error("The provided file couldn't be loaded as an Image media");
  }

  </script>
  <!-- END JAVASCRIPT -->
</body>
</html>
